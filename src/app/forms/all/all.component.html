<div id="result">
  <div id="container">
      <h2>Actual Lymphoblastic Leukemia NGS</h2>
      <div id="content">
          <div class="box pd_20">
              <app-filtered [tsvLists]="tsvLists"></app-filtered>
              <!-- 
              <div class="box_100" >
                  <table width="200%" cellpadding="0" cellspacing="0" class="table_result table_height" >
                      <thead>
                          <tr>
                              <th width="10px" class="table_result_line"></th>
                              <th width="80px">Locus</th>
                              <th width="80px">Genotype</th>
                              <th width="80px">Filter</th>
                              <th width="80px">Ref</th>
                              <th width="80px" class="left">Observed Allele</th>
                              <th width="80px">Type</th>
                              <th width="80px" style="width:100px !important;">No Call Reason</th>
                              <th width="80px">Genes</th>
                              <th width="80px" style="width: 120px !important;">Location</th>
                              <th width="80px">Loc 1</th>
                              <th width="80px">Loc 2</th>
                              <th width="80px">Loc 3</th>
                              <th width="80px">Loc 4</th>
                              <th width="80px">Loc 5</th>
                              <th width="80px">Loc 6</th>
                              <th width="80px">Loc 7</th>
                              <th width="80px">Length</th>
                              <th width="80px">Info</th>
                              <th width="80px">Variant ID</th>
                              <th width="80px">Variant Name</th>
                              <th width="80px">% Frequency</th>
                              <th width="80px">Strand</th>
                              <th width="80px">Exon</th>
                              <th width="80px">Trascript</th>
                              <th width="80px">Coding</th>
                              <th width="80px">Amino Acid Change</th>
                              <th width="80px">Variant Effect</th>
                              <th width="80px">PhyloP</th>
                              <th width="80px">SIFT</th>
                              <th width="80px">Grantham</th>
                              <th width="80px">PolyPhen</th>
                              <th width="80px" style="width: 120px !important;">FATHMM</th>
                              <th width="80px">PFAM</th>
                              <th width="80px">dbSNP</th>
                              <th width="80px">DGV</th>
                              <th width="80px">MAF</th>
                              <th width="80px">EMAF</th>
                              <th width="80px">AMAF</th>
                              <th width="80px">GMAF</th>
                              <th width="80px">UCSC Common SNPs</th>
                              <th width="80px">ExAC LAF</th>
                              <th width="80px">ExAC EAAF</th>
                              <th width="80px">ExAC OAF</th>
                              <th width="80px">ExAC EFAF</th>
                              <th width="80px">ExAC SAAF</th>
                              <th width="80px">ExAC ENFAF</th>
                              <th width="80px">ExAC AAF</th>
                              <th width="80px">ExAC GAF</th>
                              <th width="80px">COSMIC</th>
                              <th width="80px">OMIM</th>
                              <th width="80px">Gene Ontology</th>
                              <th width="80px">DrugBank</th>
                              <th width="80px">ClinVar</th>
                              <th width="80px">Allele Coverage</th>
                              <th width="80px">Allele Ratio</th>
                              <th width="80px">p-value</th>
                              <th width="80px">Phred QUAL Score</th>
                              <th width="80px">Coverage</th>
                              <th width="150px">Ref+/Ref-/Var+/Var-</th>
                              <th width="100px">Homopolymer Length</th>
                              <th width="100px">Subset of</th>
                              <th width="150px">KRGDB_622_Lukemia</th>
                              <th width="150px">KRGDB_1100_Leukemia</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let tsvList of tsvLists; let i = index">
                              <td class="table_result_line">{{i + 1}}</td>
                              <td>{{tsvList.locus}}</td>
                              <td>{{tsvList.genotype}}</td>
                              <td>{{tsvList.filter}}</td>
                              <td>{{tsvList.ref}}</td>
                              <td>{{tsvList.observed_allele}}</td>
                              <td>{{tsvList.type}}</td>
                              <td>{{tsvList.no_call_reason}}</td>
                              <td>{{tsvList.genes}}</td>
                              <td>{{tsvList.locations}}</td>
                              <td>{{tsvList.loc1}}</td>
                              <td>{{tsvList.loc2}}</td>
                              <td>{{tsvList.loc3}}</td>
                              <td>{{tsvList.loc4}}</td>
                              <td>{{tsvList.loc5}}</td>
                              <td>{{tsvList.loc6}}</td>
                              <td>{{tsvList.loc7}}</td>
                              <td>{{tsvList.length}}</td>
                              <td>{{tsvList.info}}</td>
                              <td>{{tsvList.variant_id}}</td>
                              <td>{{tsvList.variant_name}}</td>
                              <td><div class="fathmm">{{tsvList.frequency}}</div></td>
                              <td>{{tsvList.strand}}</td>
                              <td>{{tsvList.exon}}</td>
                              <td>{{tsvList.transcript}}</td>
                              <td>{{tsvList.coding}}</td>
                              <td>{{tsvList.amino_acid_change}}</td>
                              <td>{{tsvList.variant_effect}}</td>
                              <td><div class="fathmm">{{tsvList.phylop}}</div></td>
                              <td>{{tsvList.sift}}</td>
                              <td>{{tsvList.grantham}}</td>
                              <td>{{tsvList.polyphen}}</td>
                              <td><div class="fathmm">{{tsvList.fathmm}}</div></td>
                              <td><div class="pfam">{{tsvList.pfam}}</div></td>
                              <td>{{tsvList.dbsnp}}</td>
                              <td>{{tsvList.dgv}}</td>
                              <td>{{tsvList.maf}}</td>
                              <td>{{tsvList.emaf}}</td>
                              <td>{{tsvList.amaf}}</td>
                              <td>{{tsvList.gmaf}}</td>
                              <td>{{tsvList.ucsc_common_snps}}</td>
                              <td><div class="fathmm">{{tsvList.exac_laf}}</div></td>
                              <td><div class="fathmm">{{tsvList.exac_eaaf}}</div></td>
                              <td><div class="fathmm">{{tsvList.exac_oaf}}</div></td>
                              <td><div class="fathmm">{{tsvList.exac_efaf}}</div></td>
                              <td><div class="fathmm">{{tsvList.exac_saaf}}</div></td>
                              <td><div class="fathmm">{{tsvList.exac_enfaf}}</div></td>
                              <td><div class="fathmm">{{tsvList.exac_aaf}}</div></td>
                              <td><div class="fathmm">{{tsvList.exac_gaf}}</div></td>
                              <td><div class="fathmm">{{tsvList.cosmi}}</div></td>
                              <td><div class="fathmm">{{tsvList.omim}}</div></td>
                              <td>
                                <div class="geneOntology">{{tsvList.gene_ontology}}  </div>
                              </td>
                              <td><div class="fathmm">{{tsvList.drugbank}}</div></td>
                              <td>{{tsvList.clinvar}}</td>
                              <td><div class="fathmm">{{tsvList.allele_coverage}}</div></td>
                              <td><div class="fathmm">{{tsvList.allele_ratio}}</div></td>
                              <td>{{tsvList.p_value}}</td>
                              <td>{{tsvList.phred_qual_score}}</td>
                              <td>{{tsvList.coverage}}</td>
                              <td><div class="fathmm">{{tsvList.ref_ref_var_var}}</div></td>
                              <td>{{tsvList.homopolymer_length}}</td>
                              <td>{{tsvList.subset_of}}</td>
                              <td>{{tsvList.krgdb_622_lukemia}}</td>
                              <td>{{tsvList.krgdb_1100_leukemia}}</td>
                          </tr>
                      </tbody>
                  </table>
                  
              </div>
            
              <div>
                <button type="button" class="excel" (click)="excelDownload()">Excel</button>
              </div>
              -->
              <div class="sub_title">Patient: {{patientInfo.name}}, {{patientInfo.patientID}} ({{patientInfo.gender}}/{{patientInfo.age}})</div>
              <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td class="txt_02" ><span class="fb">Result </span>:
                        <input type="radio" id="vertical-radio2" name="radio-full" value="detected" [checked]="radioStatus('detected')" class="clr-radio"  (change)="result($event)">
                        <label for="vertical-radio2" class="  clr-col-12 clr-col-md-2">Detected</label>
                        &nbsp;&nbsp;
                        <input type="radio" id="vertical-radio1" name="radio-full" value="notdetected" class="clr-radio"  (change)="result($event)" [checked]="radioStatus('notdetected')">
                        <label for="vertical-radio1" class="  clr-col-12 clr-col-md-2">Not Detected</label>
                    </td>
                    <td rowspan="2" class="main_btn">
                        <ul>
                            <li>
                                <button type="button" class=" preview__button" (click)="previewToggle()">미리보기</button>
                            </li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td class="txt_02"> Other molecular and cytogenetic profiles</td>
                </tr>
            </table>
            <div style="margin-top:5px;"></div>
            <table width="100%" cellpadding="0" cellspacing="0" class="table_result">
                <colgroup>
                <col style="width:30%;" />
                <col style="width:20%;" />
                <col style="width:50%;" />
                </colgroup>
                <thead>
                    <tr>
                        <th class="table_result_line">Leukemia associated fusion</th>
                        <th>IKZF1 deletion</th>
                        <th>Chronmosomal analysis</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="table_result_line">
                            <input type="text" class="input_02" size="40"
                            [(ngModel)]= "profile.leukemia" [ngModelOptions]="{standalone: true}">
                        </td>
                        <td class="table_result_line">
                            <input type="text" class="input_02" size="30"
                            [(ngModel)]="profile.flt3itd" [ngModelOptions]="{standalone: true}">
                        </td>
                        <td>
                            <input type="text" class="input_02" size="90"
                            [(ngModel)]="profile.chron" [ngModelOptions]="{standalone: true}">
                        </td>
                    </tr>
                </tbody>
            </table>

               
              <div class="sub_title">Test Information</div>
              <table cellpadding="0" cellspacing="0" class="table_result02">
                  <colgroup>
                  <col style="width:50%;" />
                  <col style="width:50%;" />
                  </colgroup>
                  <tbody>
                      <tr>
                          <td>TARGET DISEASE:Acute lymphoblastic leukemia</td>
                          <td>METHOD:*Massively parallel sequencing</td>
                      </tr>
                      <tr>
                          <td>SPECIMEN: Genomic DNA isolated from {{specimenMsg}}</td>
                          <td>REQUEST: {{patientInfo.request}}</td>
                      </tr>
                  </tbody>
              </table>
              <div class="sub_title">Detected variants</div>
    <div class="box pd_20">
              <div class="box_100">
<!--    -------------------------------------                     -->
                  <form [formGroup]="tablerowForm"> 
                    <table class="table table-margin-top">
                      <thead>
                          <tr>
                              <th></th>
                              <th>IGV</th>
                              <th>Sanger</th>
                              <th>Type</th>                  
                              <th>Gene</th>
                              <th>Functional Impact</th>
                              <th>Transcript</th>
                              <th>Exon/Intron</th>  
                              <th>Nuceleotide change</th>    
                              <th>Amino acid change</th> 
                              <th>Zygosity</th>
                              <th>VAF %</th> 
                              <th>Reference(s)</th>      
                              <th>COSMIC ID</th> 
                              <th>
                                <button class="btn btn-success" (click)="addRow()">추가</button>
                              </th> 
                              <th>Site</th>
                              <th>Action</th>                        
                          </tr>
                      </thead>
                      <tbody>
                         
                        <ng-container formArrayName="tableRows" *ngFor="let group of getFormControls.controls; let i=index">
                          <tr  [formGroupName]="i">
                             <td><input type="checkbox"   checked (change)="boxstatus(i, $event)"></td> 
                            <td><input type="text" size="10"  class="clr-input"  formControlName="igv"></td>
                            <td><input type="text" size="10"  class="clr-input"  formControlName="sanger"></td>
                            <td><input type="text" size="10"  class="clr-input"  formControlName="type"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="gene"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="functionalImpact"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="transcript"></td> 
                            <td><input type="text" size="10"  class="clr-input" formControlName="exonIntro"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="nucleotideChange"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="aminoAcidChange"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="zygosity"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="vafPercent"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="references"></td>
                            <td><input type="text" size="10"  class="clr-input" formControlName="cosmicID"></td>
                            <td class="trash"  (click)="deleteRow(i)">&#10006;</td>
                            <td>
                              <select clrSelect name="options" (change)="saveInhouse(i, inhouse.value)" 
                              *ngIf="checkType(i)" #inhouse>
                                <option value="mutation" selected>Mutation</option>
                                <option value="artifacts">Artifacts</option>
                                <option value="benign">Benign</option>
                              </select>                    
                            </td>
                            <td  (click)="save(i)" *ngIf="checkType(i)"  class="save_mute">저장</td>  
                            </tr>                               
                          </ng-container>
                          <!-- <tr>
                            <td colspan="11" class="table_result_line">
                            <textarea style="width:98%"class="textarea_01">VUS는 ExAC, KRGDB등의 Population database에서 관철되지 않았거나, 임상적 의의가 불분명합니다.                 해당변이의 의의를 명확히 하기 위하여 환자의 buccal swab 검체로 germline variant 여부에 대한 확인이 필요 합니다.</textarea></td>
                        </tr> -->
                      </tbody>
                    </table>
                
                  </form>
<!---  ---------------------------   -->
      </div>
      <div>
        <div  class="font_14 pd_t15" *ngIf="vusstatus">
            <textarea style="width:98%"class="textarea_01">VUS는 ExAC, KRGDB등의 Population database에서 관철되지 않았거나, 임상적 의의가 불분명합니다. 해당변이의 의의를 명확히 하기 위하여 환자의 buccal swab 검체로 germline variant 여부에 대한 확인이 필요 합니다.</textarea>
          </div>
      </div>

      </div>

      <div>
      <div *ngIf="comments.length;  else commentbox; " style="overflow: scroll-y">
        <div class="sub_title" >Comments</div>   
        <form [formGroup]="tablerowForm">            
            <table width="100%" cellpadding="0" cellspacing="0" class="table_result">
               <colgroup>
                <col style="width:10%;" />
                <col style="width:25%;" />
                <col style="width:30%;" />
                <col style="width:30%;" />
                <col style="width:5%;" />
               </colgroup>  
              <thead>
                  <tr>
                      <th class="table_result_line">Gene</th>
                      <th >Variants</th>
                      <th> Comments</th>
                      <th >Reference</th>
                      <th><button class="btn btn-success" (click)="addNewCommentRow()">추가</button></th>
                  </tr>
              </thead>
              <tbody>
                  <!-- <tr *ngFor="let comment of comments;"> -->
                  <ng-container formArrayName="commentsRows" *ngFor="let group of commentsRows().controls; let i=index">
                      <tr  [formGroupName]="i">
                        <td class="table_result_line"  ><input type="text" style="width:88%" class="input_02" size="10" formControlName="gene" ></td>
                        <td><input type="text" style="width:88%" class="input_02" size="10" formControlName="variant_id"></td>
                        <td class="textarea01"><textarea style="width:96%"class="textarea_01" formControlName="comment"></textarea></td>
                        <td class="textarea01"><textarea style="width:96%"class="textarea_01" formControlName="reference"></textarea></td> 
                        <td  align="center">
                            <img [src]="'assets/images/cancel.png'" (click)="removeCommentRow(i)">
                        </td>
                      </tr>
                 </ng-container>
              </tbody>
            </table>
        </form>    
      </div>
    </div>
      <ng-template  #commentbox> 
          
        <div class="sub_title" >Comments</div>  
        <form [formGroup]="singleCommentForm">         
        <table width="100%" cellpadding="0" cellspacing="0" class="table_result">
            <colgroup>
                <col style="width:10%;" />
                <col style="width:25%;" />
                <col style="width:30%;" />
                <col style="width:30%;" />
                <col style="width:5%;" />
            </colgroup>            
          <thead>
              <tr>
                  <th class="table_result_line">Gene</th>
                  <th >Variants</th>
                  <th> Comments</th>
                  <th >Reference</th>
                  <th><button class="btn btn-success" (click)="addNewSingleCommentRow()">추가</button></th>
              </tr>
          </thead>
          <tbody>
              
                <ng-container formArrayName="singleComments" *ngFor="let group of singleCommentsRows().controls; let i=index">               
                  <tr  [formGroupName]="i">
                      <td class="table_result_line"  ><input type="text" style="width:88%" 
                        class="input_02"   size="10" formControlName="gene"></td>
                      <td>
                          <input type="text" style="width:88%" class="input_02"  formControlName="variant_id"   size="10">
                      </td>
                      <td class="textarea01">
                          <textarea style="width:96%"  formControlName="comment" class="textarea_01"></textarea>
                      </td>
                      <td class="textarea01">
                          <textarea style="width:96%" formControlName="reference" class="textarea_01"></textarea>
                      </td>
                      <td align="center">
                        <img [src]="'assets/images/cancel.png'" (click)="removeSingleCommentRow(i)">
                      </td>
                  </tr>
              </ng-container>
            
          </tbody>
      </table> 
      </form>         
      </ng-template>
<!--     -->
              <div class="sub_title">*Methods</div>
              <div class="pd_r20">
                  <textarea class="textarea_01">Total genomic DNA was extracted from the each sample. Template and automated libraries were prepared on the Ion Chef System(Thermo Fisher Scientific) and subsequently sequenced on the Ion S5 system (Thermo Fisher Scientific) with the Ion 530 Chip kit. Alignment of sequences to the reference human genome (GRCh37/hg19) and base calling were performed using the Torrent Suite software version 5.8.0 (Thermo Fisher Scientific). The Torrent Variant Caller v5.8.0.19 (Thermo Fisher Scientific) was used for calling variants from mapped reads and the called variants were annotated by the Ion Reporter software v5.6. </textarea>
              </div>
              <div class="sub_title">Genernal limitations of the technique</div>
              <div class="pd_r20">
                  <textarea class="textarea_01">The analysis was optimised to identify base pair substitutions with a high sensitivity. The sensitivity for small insertions and deletions was lower. Deep-intronic mutations, mutations in the promoter region, repeats, large exonic deletions and duplications, and other structural variants were not detected by this test. Evaluation of germline mutation can be performed using buccal swab speciman.</textarea>
              </div>
              <div class="sub_title">Target genes</div>
              <table cellpadding="0" cellspacing="0" class="table_result02">
                  <colgroup>
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  <col style="width:10%;" />
                  </colgroup>
                  <tr>
                    <td>IKZFl</td>
                    <td>BCOR</td>
                    <td>CREBBP</td> 
                    <td>ETV6</td>
                    <td>GATA3</td>
                    <td>KIT</td>
                    <td>NOTCH3</td>
                    <td>PTEN</td>
                    <td>SH2B3</td>
                    <td>TPMT</td>                   
                </tr>
                <tr>
                  <td>JAK2</td>
                  <td>BRAF</td>
                  <td>CSF3R</td>
                  <td>EZH2</td>
                  <td>HNRNPK</td>
                  <td>KRAS</td>
                  <td>NPM1</td>
                  <td>PTPN11</td>
                  <td>SMC1A</td>
                  <td>U2AF1</td>                
              </tr>  
              <tr>
                <td>NRAS</td>
                <td>CALR</td>
                <td>DDX41</td>
                <td>FAM5C</td>
                <td>IDH1</td>
                <td>KMT2A</td>
                <td>NT5C2</td>
                <td>RAD21</td>
                <td>SMC3</td>
                <td>WTI</td>
              </tr> 
              <tr>
                <td>TP53</td>
                <td>CBL</td>
                <td>DNMT3A</td>
                <td>FBXW7</td>
                <td>IDH2</td>
                <td>MPL</td>
                <td>PAX5</td>
                <td>RUNX1</td>
                <td>SRSF2</td>
                <td>ZRSR2</td>
              </tr> 
              <tr>
                <td>RB1</td>
                <td>CDKN2A</td>
                <td>EGFR</td>
                <td>FLT3</td>
                <td>lL7R</td>
                <td>MYC</td>
                <td>PDGFRA</td>
                <td>SETBP1</td>
                <td>STAG2</td>
                <td></td>
              </tr> 
              <tr>
                <td>ANKRD26</td>
                <td>CDKN2B</td>
                <td>EP300</td>
                <td>GATA1</td>
                <td>JAK1</td>
                <td>NF1</td>
                <td>PHF6</td>
                <td>SETD2</td>
                <td>TERT</td>
                <td></td>
              </tr> 
              <tr>
                <td>ASXL1</td>
                <td>CHK1</td>
                <td>ERG</td>
                <td>GATA2</td>
                <td>KAK3</td>
                <td>NOTCH1</td>
                <td>PRAME</td>
                <td>SF3B1</td>
                <td>TET2</td>
                <td></td>
              </tr> 
              </table>
  <!--     -->
  <hr class="mg_t30 mg_b20"/>
  <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
          <td class="txt_l font_16 fb">검사의뢰일/검사보고일:{{requestDate | date: 'yyyy.MM.dd'}}/{{today()}}  </td>
          <td class="txt_c font_16 fb">검사자: 
            <select #examine class="select_01" (change)="examimed(examine.value)" [value]="'김지혜'">
                <option value="김지혜" [selected]="examselected('김지혜',1)">김지혜</option>
                <option value="이건동" [selected]="examselected('이건동',2)">이건동</option>
            </select>                          
         </td>
          <td class="txt_r font_16 fb">판독의사: 
            <select class="select_01" #rechecked (change)="checked(rechecked.value)"  [value]="'이호원'">
                <option value="이호원"   [selected]="recheckselected('이호원',1)" >이호원</option>
                <option value="김명신" [selected]="recheckselected('김명신',2)">김명신</option>
                <option value="김용구" [selected]="recheckselected('김용구',3)" >김용구</option>
            </select>
          </td>
      </tr>
  </table>
  <!--     -->
          </div>


          <br />
          <div class="foot_btn mg_t30 pd_b30 txt_c main_btn"  *ngIf="preview">
            <ul>
                <li>
                    <button type="button" class="btn btn_07"
                    (click)="screenRead()" [disabled]="getStatus(1)">스크린완료</button>
                </li>
                <li>
                    <button type="button" class="btn btn_07"
                    (click)="screenReadFinish()" [disabled]="getStatus(2)">판독완료</button>
                </li>
                <li>
                    <button type="button" class="btn btn_07" [disabled]="getStatus(3)" (click)="goEMR()">EMR전송</button>
                </li>
            </ul>
        </div>
      </div>
  </div>
  <div>
      <app-preview *ngIf="isVisible"
        [result]="resultStatus"
      ></app-preview>
  </div>
</div>
