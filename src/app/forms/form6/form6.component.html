<div id="result">
    <div id="container" style="position: relative;">
        <h2 style="margin-top: 5px;">선천성 면역결핍증 [NGS]</h2>
        <button type="button" class="preview__button" (click)="previewToggle()">미리보기</button>
        <button type="button" class="excel" (click)="excelDownload()">Excel</button>
        <div id="content">
            <div class="box pd_20">
                <app-filtered [tsvLists]="tsvLists"></app-filtered>
                <div class="sub_title">Patient: Likely pathogenic variant detected</div>

                <div class="sub_title">Test Information</div>
                <table cellpadding="0" cellspacing="0" class="table_result02">
                    <colgroup>
                    <col style="width:50%;" />
                    <col style="width:50%;" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td>TARGET DISEASE: Lymphoma</td>
                            <td> METHOD: *Massively parallel sequencing</td>
                        </tr>
                        <tr>
                            <td> SPECIMEN: Genomic DNA isolated from peripheral blood</td>
                            <td> REQUEST: {{patientInfo.request}}</td>
                        </tr>
                    </tbody>
                </table>

                <div class="sub_title">Detected variants</div>
    <div class="box">
             <div class="box_100" (scroll)="tableScroll($event)"  [ngStyle]="resizeHeight()" #box100>
<!--    -------------------------------------                     -->
<form [formGroup]="tablerowForm">

    <table class="table_list td-fix" [ngClass]="tableHeader()" style="text-align: center;"  #table>
        <colgroup>
            <col style="width:50px"/>
            <col style="width:80px"/>
            <col style="width:40px"/>
            <col style="width:60px"/>  <!-- Type    -->
            <col style="width:120px"/>   <!-- Gene   -->
            <col style="width:160px"/>  <!-- Functional Impact    -->
            <col style="width:140px"/>  <!-- Transcript    -->
            <col style="width:90px"/>  <!-- Exon/Intron    -->
            <col style="width:220px"/>  <!--  Nuceleotide change   -->
            <col style="width:180px"/>  <!-- Amino acid change    -->
            <col style="width:120px"/>  <!-- Zygosity    -->
            <col style="width:200px"/>  <!--  VAF %   -->
            <col style="width:130px"/>  <!--   References  -->
            <col style="width:100px"/>   <!--  COSMIC ID   -->
            <col style="width:80px"/>  <!-- IGV -->
            <col style="width:200px"/>  <!--  sanger -->
            <col style="width:120px"/>  <!--   Site  -->
            <col style="width:80px"/>   <!--  Action -->
        </colgroup>
      <thead>
          <tr>
              <th>
                 <button class="btn btn_01 btn-x" (click)="dvSort()">정렬</button>
              </th>
              <th>
                <button class="btn btn_01 btn-s" (click)="addRow()">추가</button>
              </th>
              <th></th>
              <!--
              <th>IGV</th>
              <th>Sanger</th>
              -->
              <th>Type</th>
              <th>Gene</th>
              <th>Functional Impact</th>
              <th>Transcript</th>
              <th>Exon/Intron</th>
              <th>Nucleotide change</th>
              <th>Amino acid change</th>
              <th>Zygosity</th>
              <th>VAF %</th>
              <th>Reference(s)</th>
              <th>COSMIC ID</th>
              <th>IGV</th>
              <th>Sanger</th>
              <th>Site</th>
              <th>Action</th>
          </tr>
      </thead>
      <tbody  cdkDropList (cdkDropListDropped)="droped($event)">

        <ng-container formArrayName="tableRows" *ngFor="let group of getFormControls.controls; let i=index">
          <tr  [formGroupName]="i"  cdkDrag>

            <td>
                <button type="button" class="drag-handle"   cdkDragHandle>
                  <img [src]="'assets/baseline_unfold_more_black_18dp.png'">
                </button>
            </td>
            <td class="trash"  (click)="deleteRow(i)">
                 <img [src]="'assets/images/cancel.png'">
            </td>
            <td><input type="checkbox" class="ckbox" formControlName="checked" (change)="boxstatus(i, $event)"></td>
            <!--
            <td><input type="text" size="10"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('igv').value"
            formControlName="igv"></td>
            <td>
                <textarea class="textarea_01"  style="width: 100%; height: 100%; border: none"
                [matTooltip]="group.get('sanger').value"
                formControlName="sanger"></textarea>

            </td>
            -->
            <td><input type="text" size="10"  class="clr-input textcenter tdbox"
            [matTooltip]="group.get('type').value"
             formControlName="type"></td>
            <td ><input type="text" size="20" #gene
                 class="clr-input textcenter tdbox"
                 [matTooltip]="group.get('gene').value"
                 formControlName="gene"></td>
            <td><input type="text" size="10"  class="clr-input textcenter  tdbox"
                matInput
                [matAutocomplete]="auto"
                [matTooltip]="group.get('functionalImpact').value"
                formControlName="functionalImpact">
                <mat-autocomplete #auto="matAutocomplete">
                   <mat-option *ngFor="let option of functionalimpact" [value]="option">
                        {{option}}
                   </mat-option>
                </mat-autocomplete>
            </td>
            <td><input type="text" size="20"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('transcript').value"
            formControlName="transcript"></td>
            <td><input type="text" size="15"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('exonIntro').value"
            formControlName="exonIntro"></td>
            <td><input type="text" size="40"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('nucleotideChange').value"
            formControlName="nucleotideChange"></td>
            <td><input type="text" size="40"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('aminoAcidChange').value"
            formControlName="aminoAcidChange"></td>
            <td><input type="text" size="20"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('zygosity').value"
            formControlName="zygosity"></td>
            <td>
                <textarea class="textarea_01"  style="width: 100%; height: 100%; border: none"
                [matTooltip]="group.get('vafPercent').value"
                formControlName="vafPercent"></textarea>

            </td>
            <td><input type="text" size="10"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('references').value"
            formControlName="references"></td>
            <td><input type="text" size="20"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('cosmicID').value"
            formControlName="cosmicID"></td>

             <td><input type="text" size="10"  class="clr-input textcenter  tdbox"
            [matTooltip]="group.get('igv').value"
            formControlName="igv"></td>
            <td>
                <textarea class="textarea_01"  style="width: 100%; height: 100%; border: none"
                [matTooltip]="group.get('sanger').value"
                formControlName="sanger"></textarea>

            </td>

            <td  class="txt_c">
              <select class="select_01" style="width: 100%;" name="options" (change)="saveInhouse(i, inhouse.value)"   #inhouse>
                <option value="mutation" selected>Mutation</option>
                <option value="artifacts">Artifacts</option>
              <!--    <option value="benign">Benign</option>  -->
              </select>
            </td>
           <!-- <td  class="txt_c" (click)="save(i)" *ngIf="checkType(i)"  class="save_mute">
               저장 -->
               <td>
            <button class="btn-s blue"  (click)="save(i)" >저장</button>
               <!-- 작업후 td class="save_mute" 삭제해주세요 -->
            </td>

            </tr>
          </ng-container>
      </tbody>
    </table>

  </form>

<!---  ---------------------------   -->
      </div>

                <div class="sub_title">Comments</div>
                <div class="pd_r20">
                    <textarea class="textarea_01">text</textarea>
                </div>

                <div class="sub_title">*Methods</div>
                <div class="pd_r20">
                    <textarea class="textarea_01">text</textarea>
                </div>

                <div class="sub_title">General limitations of the technique</div>
                <div class="pd_r20">
                    <textarea class="textarea_01">text</textarea>
                </div>

                <div class="sub_title">Target genes</div>
                <div class="pd_r20">
                    <textarea class="textarea_01">text</textarea>
                </div>

                <!-- ------------------------------- END -->
                <hr class="mg_t30 mg_b20"/>
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td class="txt_l font_16 fb">
                            검사의뢰일/검사보고일/수정보고일: {{requestDate | date: 'yyyy.MM.dd'}}/{{firstReportDay}}/{{lastReportDay}}
                        </td>
                        <td class="txt_1 font_16 fb">
                            검사자:  <input type="text" [(ngModel)]="examin" class="input_02" size="30">
                        </td>
                        <td class="txt_1 font_16 fb">
                            판독의사: <input type="text"   [(ngModel)]="recheck" class="input_02" size="30">
                        </td>
                    </tr>
                </table>
                <br />
                <div class="foot_btn mg_t30 pd_b30 txt_c main_btn"  *ngIf="preview">
                    <ul>
                        <li>
                            <button type="button" class="btn btn_01" (click)="previewToggle()">미리보기</button>
                        </li>
                        <li>
                            <button class="btn btn_01" (click)="reset()" [disabled]="getStatus(4)">수정</button>
                        </li>
                        <li>
                            <button class="btn btn_01" (click)="tempSave()">임시저장</button>
                        </li>
                        <li>
                            <button class="btn btn_01" (click)="screenRead()" [disabled]="getStatus(1)">스크린완료</button>
                        </li>
                        <li>
                            <button class="btn btn_01" (click)="screenReadFinish()" [disabled]="getStatus(2)">판독완료</button>
                        </li>
                        <li>
                            <button class="btn btn_01" (click)="gotoEMR()" [disabled]="getStatus(3)">EMR전송</button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>